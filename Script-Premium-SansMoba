local Players = game:GetService("Players")
local Analytics = game:GetService("RbxAnalyticsService")

local pastebinURL = "https://pastebin.com/raw/k7jy7Z1w"

-- Ambil data dari Pastebin
local success, data = pcall(function()
    return game:HttpGet(pastebinURL)
end)

if not success then
    warn("Gagal ambil data:", data)
    return
end

-- Ambil data user
local myUserId = tostring(Players.LocalPlayer.UserId)
local myHWID = Analytics:GetClientId()
local today = os.date("%Y-%m-%d")

-- Fungsi bantu ubah tanggal jadi waktu Unix
local function toTime(dateStr)
    local y, m, d = dateStr:match("^(%d+)%-(%d+)%-(%d+)$")
    return os.time({
        year = tonumber(y),
        month = tonumber(m),
        day = tonumber(d)
    })
end

local found = false

-- Proses tiap baris
for line in data:gmatch("[^\r\n]+") do
    local id, expDate = line:match("^(.-)|(%d+%-%d+%-%d+)$")
    if id and expDate and toTime(expDate) >= os.time() then
        if id:match("^%d+$") and id == myUserId then
            -- UserId cocok
            loadstring(game:HttpGet("https://pastebin.com/raw/Qy9ymbCd"))()
            found = true
            break
        elseif id:match("%-") and id == myHWID then
            -- HWID cocok
            loadstring(game:HttpGet("https://pastebin.com/raw/NtXn6BKq"))()
            found = true
            break
        end
    end
end

-- Jika tidak cocok, tampilkan GUI notifikasi
if not found then
    warn("Gagal cocokkan ID atau data sudah expired.")

    local player = Players.LocalPlayer
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "NotifGui"
    screenGui.ResetOnSpawn = false
    screenGui.Parent = player:WaitForChild("PlayerGui")

    local textLabel = Instance.new("TextLabel")
    textLabel.Size = UDim2.new(0.5, 0, 0.1, 0)
    textLabel.Position = UDim2.new(0.25, 0, 0.45, 0)
    textLabel.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
    textLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    textLabel.Font = Enum.Font.SourceSansBold
    textLabel.TextScaled = true
    textLabel.Text = "Akses ditolak! ID tidak cocok atau sudah expired"
    textLabel.Parent = screenGui

    local corner = Instance.new("UICorner", textLabel)
    corner.CornerRadius = UDim.new(0, 8)

    local stroke = Instance.new("UIStroke", textLabel)
    stroke.Thickness = 2
    stroke.Color = Color3.fromRGB(255, 255, 255)

    task.delay(5, function()
        screenGui:Destroy()
    end)
end
